#include<iostream>
#include<ctype.h>
#include<string.h>
#include<math.h>
using namespace std;
class stack
{
	struct node
	{
	   float   data;
	   node *next;
	};
	node *top;
public:
       stack()
       {
	 top=NULL;
       }
       int empty();
       void push(float);
       float pop();
       int Top();
};

int stack::empty()
{
 if(top==NULL)
	return 1;
else
 return 0;
}

void stack::push(float  x)
{  	node *newnode;
  newnode=new node;
  newnode->data=x;
  newnode->next=top;
  top=newnode;
}

float stack::pop()
{
   node *temp=top;
    float  x;
    top=top->next;
    x=temp->data;
 delete temp;
 return x;
}

int stack::Top()
{	return top->data;	}

int Priority(char Op)
{
if(Op=='(' || Op==')')
	return 0;
if(Op=='+' || Op=='-')
	return 1;
else if(Op=='*' || Op=='/')
	return 2;
else if(Op=='^')
	return 3;
else
	return 4;
}

float Operation(char Op,float A,float B)
{
float P;
if(Op=='*')
	P=A*B;
else if(Op=='/')
	P=A/B;
else if(Op=='+')
	P=A+B;
else if(Op=='-')
	  P=A-B;
else if (Op=='^')
        P=pow(A,B);

return P;
}

void infixtopostfix(char infix[20])
{
  char post[20],x,token;
  int i,j=0;
  stack s;
for(i=0;infix[i]!='\0';i++)
{	token=infix[i];
if(isalnum(token))//alphanumberic
         post[j++]=token;
else
   if(token == '(')
	s.push(token);
   else
	if(token == ')')
     while((x=s.pop())!='(')//pop till )
	       post[j++]=x;
	else
	{
	   while(!s.empty() && Priority(token)<=Priority(s.Top()))
	      {
               post[j++]=s.pop();
              }
	      s.push(token);
	}
}

while(!s.empty())
   post[j++]=s.pop();
  post[j]='\0';
cout<<"\nPostfix Expression=>";
cout<<post;
}


float Postfix_Evaluation(char String[20])
{
    int i;
    char token;
    float op1,op2,Result,val;
    stack  S;
    for(i=0;String[i]!='\0';i++)
  {
    token=String[i];
   if(isalpha(token))
  {
      cout<<"\nEnter the value of "<<token<<"=>";
	 cin>>val;
	 S.push(val);
   }
else if(isdigit(token))
  S.push(token-48);
else
{
 op2=S.pop();
 op1=S.pop();
 Result=Operation(token,op1,op2);
 cout<<"Result: ";
 S.push(Result);
}
}
return S.pop();
}

int main()
{
    int ch;
    char infix[20],post[20],prefix[20];
 do
  {
   cout<<"\n\nSELECT THE CHOICE FROM BELOW\n1:Infix to Postfix\n2:Postfix Evaluation";
   cout<<"\nEnter your Choice: ";
   cin>>ch;
   switch(ch)
   {
    case 1:
          cout<<"\nEnter infix Expression=>";
          cin>>infix;
	  	  infixtopostfix(infix);
		  break;

    
   case 2:
          cout<<"\nEnter Postfix Expression=>";
          cin>>post;
	  	  cout<<"\nEvaluated Result=> " <<Postfix_Evaluation(post);
		  break;

    }
}while(ch!=2);
}
